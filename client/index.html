<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <title>Photobooth Control</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="app">
        <header>
            <h1>Photobooth</h1>
            <div class="status-bar">
                <span class="status-item" id="camera-status">
                    <span class="status-indicator"></span>
                    Camera
                </span>
                <span class="status-item" id="printer-status">
                    <span class="status-indicator"></span>
                    Printer
                </span>
                <button class="settings-btn" id="settings-toggle">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 15.5A3.5 3.5 0 0 1 8.5 12A3.5 3.5 0 0 1 12 8.5a3.5 3.5 0 0 1 3.5 3.5a3.5 3.5 0 0 1-3.5 3.5m7.43-2.53c.04-.32.07-.64.07-.97c0-.33-.03-.65-.07-.97l2.11-1.63c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.3-.61-.22l-2.49 1c-.52-.39-1.06-.73-1.69-.98l-.37-2.65A.506.506 0 0 0 14 2h-4c-.25 0-.46.18-.5.42l-.37 2.65c-.63.25-1.17.59-1.69.98l-2.49-1c-.22-.08-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64L4.57 11c-.04.32-.07.64-.07.97c0 .33.03.65.07.97l-2.11 1.63c-.19.15-.24.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1c.52.39 1.06.73 1.69.98l.37 2.65c.04.24.25.42.5.42h4c.25 0 .46-.18.5-.42l.37-2.65c.63-.25 1.17-.59 1.69-.98l2.49 1c.22.08.49 0 .61-.22l2-3.46c.13-.22.07-.49-.12-.64l-2.11-1.63Z"/>
                    </svg>
                </button>
                <button class="fullscreen-btn" id="fullscreen-toggle">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"/>
                    </svg>
                </button>
            </div>
        </header>

        <main>
            <div class="preview-container">
                <div id="preview-frame" class="preview-frame">
                    <img id="preview-image" src="" alt="Camera Preview">
                    <div class="preview-overlay" id="preview-overlay">
                        <div class="countdown" id="countdown"></div>
                    </div>
                </div>
            </div>
            
            <!-- Error Toast -->
            <div id="error-toast" class="error-toast">
                <div class="error-content">
                    <svg viewBox="0 0 24 24" class="error-icon">
                        <path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                    </svg>
                    <span id="error-message"></span>
                    <button id="error-close" class="error-close">×</button>
                </div>
            </div>
            
            <!-- Photo Detail Modal -->
            <div id="photo-detail-modal" class="photo-modal">
                <div class="photo-modal-content">
                    <button class="photo-modal-close" id="photo-modal-close">×</button>
                    <div class="photo-container">
                        <img id="detail-image" src="" alt="Captured Photo">
                    </div>
                    <div class="photo-actions">
                        <button id="print-photo-btn" class="print-button">
                            <svg viewBox="0 0 24 24" class="print-icon">
                                <path fill="currentColor" d="M18 3H6v4h12V3zm-6 2v1H8V5h4zm6 3H6a2 2 0 0 0-2 2v4h2v4h12v-4h2v-4a2 2 0 0 0-2-2zm0 8H6v-2h12v2zm2-4a1 1 0 1 1 0-2 1 1 0 0 1 0 2z"/>
                            </svg>
                            Print Photo
                        </button>
                        <button id="retake-photo-btn" class="retake-button">
                            <svg viewBox="0 0 24 24" class="retake-icon">
                                <path fill="currentColor" d="M12 6v3l4-4-4-4v3c-4.42 0-8 3.58-8 8 0 1.57.46 3.03 1.24 4.26L6.7 14.8A5.87 5.87 0 0 1 6 12c0-3.31 2.69-6 6-6zm6.76 1.74L17.3 9.2c.44.84.7 1.8.7 2.8 0 3.31-2.69 6-6 6v-3l-4 4 4 4v-3c4.42 0 8-3.58 8-8 0-1.57-.46-3.03-1.24-4.26z"/>
                            </svg>
                            Retake
                        </button>
                    </div>
                </div>
            </div>

            <div class="controls">
                <button id="connect-btn" class="connect-button">
                    <svg viewBox="0 0 24 24" class="connect-icon">
                        <path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                    </svg>
                    <span>Connect to Camera</span>
                </button>
                
                <button id="capture-btn" class="capture-button" style="display: none;">
                    <svg viewBox="0 0 100 100" class="camera-icon">
                        <circle cx="50" cy="50" r="45" fill="none" stroke="currentColor" stroke-width="3"/>
                        <circle cx="50" cy="50" r="35" fill="currentColor"/>
                    </svg>
                    <span>Take Photo</span>
                </button>
            </div>

            <div class="recent-photos">
                <h3>Recent Photos</h3>
                <div class="photo-grid" id="photo-grid"></div>
            </div>
        </main>

        <div class="modal" id="settings-modal">
            <div class="modal-content">
                <h2>Camera Settings</h2>
                <div class="settings-grid">
                    <div class="setting-item">
                        <label for="iso">ISO</label>
                        <select id="iso">
                            <option value="AUTO">Auto</option>
                            <option value="100">100</option>
                            <option value="200">200</option>
                            <option value="400">400</option>
                            <option value="800">800</option>
                        </select>
                    </div>
                    <div class="setting-item">
                        <label for="aperture">Aperture</label>
                        <select id="aperture">
                            <option value="f/2.8">f/2.8</option>
                            <option value="f/4">f/4</option>
                            <option value="f/5.6">f/5.6</option>
                            <option value="f/8">f/8</option>
                        </select>
                    </div>
                    <div class="setting-item">
                        <label for="shutter">Shutter Speed</label>
                        <select id="shutter">
                            <option value="1/30">1/30</option>
                            <option value="1/60">1/60</option>
                            <option value="1/125">1/125</option>
                            <option value="1/250">1/250</option>
                        </select>
                    </div>
                </div>
                <button class="modal-close" id="modal-close">Close</button>
            </div>
        </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="app.js"></script>
</body>
</html>